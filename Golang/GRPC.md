# GRPC

## 概念

RPC 是一种远程过程调用. 常用与分布式系统.

RPC 是一种设计\实现框架, 通讯协议只是其中一部分.

gRPC 基于 HTTP2, 使用 ProtoBuf 序列化协议, 支持多种开发语言

## 相对于 HTTP 优势

- 基于 TCP 协议的情况下, 本身是长连接, 减少网络开销
- RPC 框架一般都有注册中心, 有丰富的监控管理; 发布, 下线接口, 动态扩展等, 对调用方无感知

## RPC 中主要解决的问题

- 建立通信: 在客户端与服务端建立起数据传输通道, 大部分是  TCP 连接 (gRPC 使用了 HTTP2)

## gRPC 为什么是 HTTP2

优点:

- 公开\经过时间检验的标准
- 天然支持物联网\手机\浏览器
- 基于 HTTP2 的多语言客户端实现容易
- 支持 Stream 和流控
- 天然支持 SSL
- 鉴权成熟

缺点:

- RPC 的元数据传输效率不够高效
- 一次 gRPC 调用需要两次解码(Headers frame, Data frame)

## gRPC 还是 thrift

- gRPC
    - 良好的文档\示例
    - 喜欢\习惯 HTTP2, ProtoBuf
    - 对网络传输带宽敏感
- Thrift
    - 需要在非常多语言进行数据交换
    - 对 CPU 敏感
    - 协议层\传输层有多种控制要求
    - 需要稳定的版本
    - 不需要良好的文档和示例